<%= form_with(model: @booking, id: "#{dom_id(@booking)}_forms") do |form| %>
  
  <div class="mb-6">
    <%= form.hidden_field :service_id, value: @service.id %>
  </div>

  <div class="mb-6">
    <%= form.label :billing_id, class: label_class %>

    <%billing = Billing.where(user_id: current_user) %>
    <% if !billing.exists? %>
      <%= link_to 'Provide your billing address here.', new_billing_path, class: "text-sky-500 font-normal mb-6" %>
    <% end %>
    <%= form.collection_select :billing_id, Billing.where(user_id: current_user), :id, :complete_address, {}, class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded focus:ring-sky-500 focus:border-sky-500 block w-full p-2.5" %>
  </div>

  <div class="mb-6">
    <%= form.label :payment_id, class: label_class %>
    <%= form.collection_select :payment_id, Payment.all, :id, :name, {}, class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded focus:ring-sky-500 focus:border-sky-500 block w-full p-2.5" %>
  </div>

  <div class="mb-6">
    <%= form.label :booked_time, class: label_class %>
    <%= form.select :booked_time, options_for_select(@service.available_slots.map{ |slot| ["#{Time.parse(slot['start_time']).strftime("%l:%M %p")} - #{Time.parse(slot['end_time']).strftime("%l:%M %p")}", "#{slot['start_time']}"] }), {}, class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded focus:ring-sky-500 focus:border-sky-500 block w-full p-2.5" %>
  </div>

  <div class="mb-6">
    <%= form.label :slot %>
    <%= form.number_field :slot, class: input_class, min: 1 %>
  </div>

  <div class="mb-6">
    <%= form.submit "Book a service", class:"text-white bg-sky-600 hover:bg-sky-800 focus:ring-4 focus:outline-none focus:ring-sky-300 font-medium rounded-lg text-sm w-1/4 px-5 py-2.5 text-center"%>
  </div>

<% end %>